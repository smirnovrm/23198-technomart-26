var loginBlock=document.querySelector(".login-block ul"),profileBlock=document.querySelector(".profile-bar"),addLinkBlock=document.querySelector(".additional"),bookmarkBtn=document.querySelector(".extra a[title='Закладки']"),basketBtn=document.querySelector(".extra a[title='Корзина']"),bookmarBtnCnt=document.querySelector("a[title='Закладки'] span"),basketBtnCnt=document.querySelector("a[title='Корзина'] span"),loginBtn=document.querySelector(".login-btn"),logoutBtn=document.querySelector(".logout-btn"),mapModal=document.querySelector("#map-modal"),basketModal=document.querySelector("#basket-modal"),openMap=document.querySelector("#map"),closeMapBtn=document.querySelector("#map-modal .popup-close"),closeBasketBtn=document.querySelector("#basket-modal .modal-wrap .popup-close"),continueShopingBtn=document.querySelector("#continue-btn"),favoriteCnt=0,basketCnt=0;try{openMap.addEventListener("click",function(e){e.preventDefault(),mapModal.classList.add("show")}),closeMapBtn.addEventListener("click",function(e){e.preventDefault(),mapModal.classList.remove("show")})}catch(e){console.log("На странице отсутствует модальное окно")}try{openContact.addEventListener("click",function(e){e.preventDefault(),contactModal.classList.add("show"),personName.focus()}),closeContactBtn.addEventListener("click",function(e){e.preventDefault(),contactModal.classList.remove("show")})}catch(e){console.log("На странице отсутствует модальное окно")}loginBtn.addEventListener("click",function(e){e.preventDefault(),loginBlock.classList.add("visually-hidden"),profileBlock.classList.remove("visually-hidden"),addLinkBlock.classList.remove("visually-hidden")}),logoutBtn.addEventListener("click",function(e){e.preventDefault(),loginBlock.classList.remove("visually-hidden"),profileBlock.classList.add("visually-hidden"),addLinkBlock.classList.add("visually-hidden")}),document.querySelector(".catalog-items").addEventListener("click",function(e){"bookmark"===e.target.className?(favoriteCnt++,bookmarBtnCnt.innerHTML=favoriteCnt,bookmarkBtn.classList.add("added-item")):"buy"===e.target.className&&(basketModal.classList.add("show"),basketCnt++,0!==basketBtnCnt.innerHTML&&basketBtnCnt.innerHTML++,basketBtn.classList.add("added-item"))});try{closeBasketBtn.addEventListener("click",function(e){basketModal.classList.remove("show")}),continueShopingBtn.addEventListener("click",function(e){basketModal.classList.remove("show")})}catch(e){console.log("Не могу закрыть окно")}try{var link=document.querySelector("#open-contact"),popup=document.querySelector("#contact-modal"),close=popup.querySelector("#contact-modal .popup-close"),form=popup.querySelector("form"),personName=popup.querySelector("#name-person"),email=popup.querySelector("#email-person"),msg=popup.querySelector("#mail-text")}catch(e){console.log("")}var isStorageSupport=!0,storage="";try{storagePerson=localStorage.getItem("personName")}catch(e){isStorageSupport=!1}try{storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}try{storageText=localStorage.getItem("msg")}catch(e){isStorageSupport=!1}try{link.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("show"),storagePerson&&storageEmail?(personName.value=storagePerson,email.value=storageEmail,msg.focus()):storagePerson?(personName.value=storagePerson,email.focus()):personName.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("show"),popup.classList.remove("modal-error")}),form.addEventListener("submit",function(e){personName.value&&email.value&&msg.value?isStorageSupport&&(localStorage.setItem("personName",personName.value),localStorage.setItem("email",email.value),localStorage.setItem("msg",msg.value)):(e.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("show")&&(popup.classList.remove("show"),popup.classList.remove("modal-error")));try{mapModal.classList.contains("show")&&mapModal.classList.remove("show")}catch(e){console.log("Нет модального окна")}try{basketModal.classList.contains("show")&&basketModal.classList.remove("show")}catch(e){console.log("Нет модального окна")}})}catch(e){console.log("")}
